---

# Example analysis file to run a demo OpenCOVID analysis
  
# ---- Baseline settings ----

population_size: 10000
        
# Run all simulations for 500 days: 100 days burn-in, 100 days fitting data, 300 days projection
n_days: 200 
n_days_init: -365

# Initial conditions (sample from normal distribution)
previously_infected:
  uncertainty:
    fn: "norm"  # Options: unif (min, max), norm (mean, sd), pois (lambda)
    mean: 0.75
    sd: 0.04

# Initiate future at some effective reporduction number
Re: 1.05

# ---- Demography ----
# 105 yearly bins for ages [0-1], (1-2], ..., (104-105+] required
demography:
 1:	0.01157
 2:	0.01157
 3:	0.01157
 4:	0.01157
 5:	0.01157
 6:	0.01248
 7:	0.01248
 8:	0.01248
 9:	0.01248
 10:	0.01248
 11:	0.01392
 12:	0.01392
 13:	0.01392
 14:	0.01392
 15:	0.01392
 16:	0.01346
 17:	0.01346
 18:	0.01346
 19:	0.01346
 20:	0.01346
 21:	0.01290
 22:	0.01290
 23:	0.01290
 24:	0.01290
 25:	0.01290
 26:	0.01203
 27:	0.01203
 28:	0.01203
 29:	0.01203
 30:	0.01203
 31:	0.01180
 32:	0.01180
 33:	0.01180
 34:	0.01180
 35:	0.01180
 36:	0.01333
 37:	0.01333
 38:	0.01333
 39:	0.01333
 40:	0.01333
 41:	0.01580
 42:	0.01580
 43:	0.01580
 44:	0.01580
 45:	0.01580
 46:	0.01497
 47:	0.01497
 48:	0.01497
 49:	0.01497
 50:	0.01497
 51:	0.01363
 52:	0.01363
 53:	0.01363
 54:	0.01363
 55:	0.01363
 56:	0.01193
 57:	0.01193
 58:	0.01193
 59:	0.01193
 60:	0.01193
 61:	0.01085
 62:	0.01085
 63:	0.01085
 64:	0.01085
 65:	0.01085
 66:	0.00950
 67:	0.00950
 68:	0.00950
 69:	0.00950
 70:	0.00950
 71:	0.00782
 72:	0.00782
 73:	0.00782
 74:	0.00782
 75:	0.00782
 76:	0.00673
 77:	0.00673
 78:	0.00673
 79:	0.00673
 80:	0.00673
 81:	0.00389
 82:	0.00389
 83:	0.00389
 84:	0.00389
 85:	0.00389
 86:	0.00225
 87:	0.00225
 88:	0.00225
 89:	0.00225
 90:	0.00225
 91:	0.00086
 92:	0.00086
 93:	0.00086
 94:	0.00086
 95:	0.00086
 96:	0.00024
 97:	0.00024
 98:	0.00024
 99:	0.00024
 100:	0.00024
 101:	0.00004
 102:	0.00004
 103:	0.00004
 104:	0.00004
 105:	0.00004

# ---- Network structure ----

# Network structure
#
# OPTIONS: "random", "age", or "layers"
network_structure: "age"

# Countries to pull network matrix data from
contact_matrix_countries: IE # ISO Alpha-3 country codes (en.wikipedia.org/wiki/ISO_3166-1_alpha-2)
# ---- Calibration settings ----
  
# Type of calibration to perform
#
# OPTIONS:
#   Re_user: Value of 'Re' as set by the user
#   Re_data: Value of 'Re' as defined by data
#  epi_data: Fitting to temporal epidemiological data
calibration_type: "epi_data"

# Define parameters to be calibrated
calibration_parameters:
- param: "contacts"
  lower: 2
  upper: 20
  synth: 12  # Used for generating synthetic data (to test fitting algorithm)

# Additional options for Re_data and epi_data calibration
calibration_options: 
  data_synthetic: no
  data_source:
    epi: "RespiCompass"  # OPTIONS: 'ECDC' or 'RespiCompass'
    Re: "RespiCompass"  # OPTIONS: 'ECDC' or 'RespiCompass' or 'ETH'
  country: IE
  country_pop: 5073540
  data_end: 2024-05-26
  data_days: 100  # For epi_data only (Re_window used for Re_data)
  data_burn_in: 100  # Number of days to simulate before data kicks in (for epi_data only)
  offset_synthetic: 0.05  # Standard deviation for offseting synthetically generated data

# Time period to calibrate to (epi_data only)
calibration_time_period: "week" # OPTIONS: "day", "week", "month", "quater", "year" 

# Weights for epi_data calibration only (set metrics to 0 to turn off)
calibration_weights:
  time: "none"  # OPTIONS: 'none', 'weak', 'strong', 'exponential'
  peak: "none"  # OPTIONS: 'none', 'weak', 'strong'
  metric:
    confirmed: 1.0
    deaths: 1.0
    hospital_admissions: 1.0
    icu_admissions: 1.0
    hospital_beds: 0.0
    icu_beds: 0.0

# Strength of objective function scaling
objective_scaling: "none"  # OPTIONS: 'none', 'weak', or 'strong'

# Emulator options
emulator:
  init_samples: 250       # Initial number of paramter sets
  seeds: 8                # Number of stochastic runs per sample
  test_train_split: 0.15  # Test-train split of samples (15-20% is reasonable)
  gp_kernel: "Matern5_2"  # Select GP kernel function (see ?mleHetGP)
  gp_max_iter: 1000       # Maximum number of iterations of GP algorithm

# Adaptive sampling options
#
# NOTE: Adaptive sampling is very useful for fitting to epi_data - not so much for Re
adaptive_sampling:
  rounds: 1                   # Number of rounds (set to 0 to turn adaptive sampling off)
  acquisition_points: 10000   # Number of randomly sampled points to evaluate for resampling
  min_value_accepted: 0.0001  # Lower bound for expected improvment we'll consider
  max_samples_accepted: 100   # Take at maximum n new parameter sets per round
  
# Optimisation options (for finding global minimum of emulated space)
optimisation:
  optim_runs: 20  # Number of times to perform optimisation
  optim_iters: 100  # Number of ASD iterations
  
# Time period for fitting to Re
Re_fit:
  start_day: 10  # Start fitting from day n of simulations
  n_days: 5      # Take the average over the next n days

  